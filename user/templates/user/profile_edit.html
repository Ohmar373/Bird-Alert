{% extends "base.html" %}
{% load static %}

{% block title %}Edit Profile{% endblock %}

{% block content %}
<div class="card">
  <h2>Edit Profile</h2>
  <form method="post" enctype="multipart/form-data">
    {% csrf_token %}
    <div class="form-group">
      {{ u_form.username.label_tag }}
      {{ u_form.username }}
      {{ u_form.username.errors }}
    </div>

    <div class="form-group">
      {{ p_form.image.label_tag }}
      {% if request.user.profile.image %}
        <div style="margin:8px 0;"><img src="{{ request.user.profile.image.url }}" alt="profile" style="max-width:150px;border-radius:8px;"></div>
      {% endif %}
      {{ p_form.image }}
      {{ p_form.image.errors }}
    </div>

    <button class="btn btn-primary" type="submit" name="save_profile">Save</button>
  </form>
</div>

<div class="card" style="margin-top:1rem;">
  <h2>Change Password</h2>
  <form method="post">
    {% csrf_token %}
    {{ password_form.non_field_errors }}

    <div class="form-group">
      {{ password_form.old_password.label_tag }}
      {{ password_form.old_password }}
      {{ password_form.old_password.errors }}
    </div>

    <div class="form-group">
      {{ password_form.new_password1.label_tag }}
      {{ password_form.new_password1 }}
      {{ password_form.new_password1.errors }}
    </div>

    <div class="form-group">
      {{ password_form.new_password2.label_tag }}
      {{ password_form.new_password2 }}
      {{ password_form.new_password2.errors }}
    </div>

    <button class="btn btn-primary" type="submit" name="change_password">Change Password</button>
  </form>
</div>
{% endblock %}
