{% extends 'base.html' %}
{% load static %}

{% block body_class %}landing-page{% endblock %}

{% block title %}BirdAlert - Find Birds. Share Discoveries.{% endblock %}

{% block extra_css %}
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
{% endblock %}

{% block content %}

{% if messages %}
  <div style="position: fixed; top: 80px; right: 1.5rem; z-index: 9999; width: 320px;">
    {% for message in messages %}
    <div class="message" style="margin-bottom: 0.5rem;">{{ message }}</div>
    {% endfor %}
  </div>
{% endif %}

{% if user.is_authenticated %}
<!-- ============================= AUTHENTICATED USER FEED ============================= -->

<section class="welcome-section">
  <h1>Welcome back, {{ user.username }}!</h1>
  <p>Ready to log a new sighting? <a href="{% url 'add_sighting' %}" style="color: #2d6a4f; font-weight: 600;">Add one now ‚Üí</a></p>
</section>

<section class="sightings-section">
  <h2 style="text-align: center; margin-bottom: 2rem; color: #333;">Recent Bird Sightings</h2>

  {% if sightings %}
    {% for sighting in sightings %}
    <div class="sighting-card">
      <div>
        <div class="sighting-header">
          <h3>{{ sighting.bird_species.common_name }} <span class="scientific-name">({{ sighting.bird_species.scientific_name }})</span></h3>
          <p class="sighting-meta">by {{ sighting.user.username }} ‚Ä¢ {{ sighting.timestamp|date:"M d, Y \a\t g:i A" }}</p>
        </div>

        <div class="sighting-details">
          <p><strong>Location:</strong> {{ sighting.location_name }}</p>
          <p><strong>Weather:</strong> {{ sighting.weather_conditions }}</p>
          {% if sighting.description %}
          <p><strong>Notes:</strong> {{ sighting.description }}</p>
          {% endif %}
        </div>

        <div class="sighting-actions">
          <button class="action-btn">Like</button>
          <button class="action-btn">Comment</button>
          {% if sighting.user == user %}
          <form method="post" action="{% url 'sightings:delete_sighting' sighting.id %}" onsubmit="return confirm('Delete this sighting?');" style="flex: 1;">
            {% csrf_token %}
            <button type="submit" class="action-btn" style="width: 100%;">Delete</button>
          </form>
          {% endif %}
        </div>
      </div>

      <div class="sighting-map" id="map-{{ sighting.id }}"></div>
    </div>
    {% endfor %}
  {% else %}
    <p style="text-align: center; color: #999; padding: 2rem;">No sightings yet. Be the first to log one!</p>
  {% endif %}
</section>

{% else %}
<!-- ============================= GUEST LANDING PAGE ============================= -->

<!-- ‚îÄ‚îÄ‚îÄ HERO ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
<section class="lp-hero" id="lp-hero" style="background-image: url('{% static 'egret.jpg' %}');">
  <div class="lp-hero-overlay"></div>
  <div class="lp-hero-inner">
    <div class="lp-hero-content">
      <span class="lp-hero-badge">üê¶ Community Bird Watching Platform</span>
      <h1 class="lp-hero-title">Find Birds.<br>Share Discoveries.<br>Connect with Nature.</h1>
      <p class="lp-hero-subtitle">
        The community-powered platform for birders of all levels. Log sightings with GPS precision,
        identify species from 10,000+ database, and discover birds in proven locations near you.
      </p>
      <div class="lp-hero-actions">
        <a href="{% url 'register' %}" class="lp-btn-primary">Join Free ‚Üí</a>
        <a href="{% url 'login' %}" class="lp-btn-ghost">Sign In</a>
      </div>
      <p class="lp-hero-tagline">Perfect for the curious beginner and the seasoned expert alike.</p>
    </div>
  </div>
  <div class="lp-scroll-indicator"></div>
</section>

<!-- ‚îÄ‚îÄ‚îÄ INTRO STRIP ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
<div class="lp-intro">
  <div class="lp-container">
    <p class="lp-intro-text">
      BirdAlert connects birdwatchers to proven sighting locations, a massive species database,
      and a vibrant community ‚Äî all in one free platform.
    </p>
  </div>
</div>

<!-- ‚îÄ‚îÄ‚îÄ PHOTO SHOWCASE ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
<section class="lp-gallery">
  <div class="lp-gallery-grid">
    <div class="lp-gallery-item lp-gallery-large">
      <img src="{% static 'egret.jpg' %}" alt="Great Egret in the wild" loading="lazy">
      <div class="lp-gallery-label">
        <h3>Spot Rare Species</h3>
        <p>From elegant egrets to migratory waterfowl ‚Äî find them all</p>
      </div>
    </div>
    <div class="lp-gallery-item">
      <img src="{% static 'goose.jpg' %}" alt="Goose sighting" loading="lazy">
      <div class="lp-gallery-label">
        <h3>Explore Local Hotspots</h3>
        <p>Community-verified locations where birds are actually found</p>
      </div>
    </div>
    <div class="lp-gallery-item">
      <img src="{% static 'bird-flowers.jpg' %}" alt="Bird among flowers" loading="lazy">
      <div class="lp-gallery-label">
        <h3>Discover Nature's Beauty</h3>
        <p>Every sighting tells a story ‚Äî share yours with the community</p>
      </div>
    </div>
  </div>
</section>

<!-- ‚îÄ‚îÄ‚îÄ FEATURES ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
<section class="lp-features" id="features">
  <div class="lp-container">
    <div class="lp-section-header">
      <span class="lp-section-tag">Features</span>
      <h2>Everything a Birder Needs</h2>
      <p>Whether you're a casual observer or a serious enthusiast, BirdAlert has the tools to enhance every outing.</p>
    </div>
    <div class="lp-features-grid">

      <div class="lp-feature-card">
        <div class="lp-feature-icon" style="background: #e8f5e9; color: #2d6a4f;">üìç</div>
        <h3>GPS Sighting Logs</h3>
        <p>Pin exact locations on interactive maps. Return to proven spots where others have found rare birds and see community sightings in real time.</p>
      </div>

      <div class="lp-feature-card">
        <div class="lp-feature-icon" style="background: #e3f2fd; color: #1565c0;">üîç</div>
        <h3>Bird Identification</h3>
        <p>Not sure what you saw? Search our database of 10,000+ species by name or description. Find the exact bird with common and scientific names.</p>
      </div>

      <div class="lp-feature-card">
        <div class="lp-feature-icon" style="background: #fff3e0; color: #e65100;">üì∏</div>
        <h3>Photo Uploads</h3>
        <p>Attach photos directly to your sightings. Capture the moment and help others identify species with visual evidence straight from the field.</p>
      </div>

      <div class="lp-feature-card">
        <div class="lp-feature-icon" style="background: #fce4ec; color: #c62828;">‚ù§Ô∏è</div>
        <h3>Likes & Comments</h3>
        <p>Engage with the birding community. Like remarkable sightings, leave comments, and build lasting connections with fellow birdwatchers.</p>
      </div>

      <div class="lp-feature-card">
        <div class="lp-feature-icon" style="background: #f3e5f5; color: #6a1b9a;">üó∫Ô∏è</div>
        <h3>Find Local Parks & Birds</h3>
        <p>Sightings are automatically reverse-geocoded to display the nearest park, city, or natural area ‚Äî helping you find proven birding locations.</p>
      </div>

      <div class="lp-feature-card">
        <div class="lp-feature-icon" style="background: #e8eaf6; color: #283593;">‚òÅÔ∏è</div>
        <h3>Weather & Field Notes</h3>
        <p>Record weather conditions alongside every sighting. Build a rich personal birding journal and understand patterns over time.</p>
      </div>

    </div>
  </div>
</section>

<!-- ‚îÄ‚îÄ‚îÄ HOW IT WORKS ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
<section class="lp-how">
  <div class="lp-container">
    <div class="lp-section-header lp-section-header-light">
      <span class="lp-section-tag lp-tag-light">Simple</span>
      <h2>Get Started in Minutes</h2>
      <p>No app download required. BirdAlert works right in your browser ‚Äî completely free.</p>
    </div>
    <div class="lp-steps">
      <div class="lp-step">
        <div class="lp-step-num">1</div>
        <h3>Create a Free Account</h3>
        <p>Sign up in seconds with just a username and email. No payment, no subscription ‚Äî free forever.</p>
      </div>
      <div class="lp-step-arrow">‚Üí</div>
      <div class="lp-step">
        <div class="lp-step-num">2</div>
        <h3>Log Your First Sighting</h3>
        <p>Use GPS to mark the location, search for the bird species, add weather, notes, and a photo.</p>
      </div>
      <div class="lp-step-arrow">‚Üí</div>
      <div class="lp-step">
        <div class="lp-step-num">3</div>
        <h3>Explore & Connect</h3>
        <p>Browse community sightings, find birds near you, like and comment, and build your life list.</p>
      </div>
    </div>
  </div>
</section>

<!-- ‚îÄ‚îÄ‚îÄ STATS ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
<section class="lp-stats">
  <div class="lp-container">
    <div class="lp-stats-grid">
      <div class="lp-stat">
        <div class="lp-stat-num">10,000+</div>
        <div class="lp-stat-label">Bird Species</div>
      </div>
      <div class="lp-stat">
        <div class="lp-stat-num">{{ total_sightings|default:"0" }}</div>
        <div class="lp-stat-label">Sightings Logged</div>
      </div>
      <div class="lp-stat">
        <div class="lp-stat-num">{{ total_users|default:"0" }}</div>
        <div class="lp-stat-label">Birdwatchers</div>
      </div>
      <div class="lp-stat">
        <div class="lp-stat-num">Free</div>
        <div class="lp-stat-label">Always & Forever</div>
      </div>
    </div>
  </div>
</section>

<!-- ‚îÄ‚îÄ‚îÄ COMMUNITY PREVIEW ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
{% if sightings %}
<section class="lp-community">
  <div class="lp-container">
    <div class="lp-section-header">
      <span class="lp-section-tag">Live Activity</span>
      <h2>What the Community is Discovering</h2>
      <p>Real sightings logged by BirdAlert members. Join to add your own and see the full map.</p>
    </div>
    <div class="lp-sightings-grid">
      {% for sighting in sightings|slice:":6" %}
      <div class="lp-sighting-card">
        <div class="lp-sighting-map" id="lp-map-{{ sighting.id }}"></div>
        <div class="lp-sighting-info">
          <h4>{{ sighting.bird_species.common_name }}</h4>
          <em>{{ sighting.bird_species.scientific_name }}</em>
          <div class="lp-sighting-meta">
            <span>üìç {{ sighting.location_name|truncatechars:28 }}</span>
            <span>{{ sighting.timestamp|timesince }} ago</span>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
    <div class="lp-community-cta">
      <p>Join the community to see all sightings and log your own discoveries.</p>
      <a href="{% url 'register' %}" class="lp-btn-primary">Join BirdAlert Free ‚Üí</a>
    </div>
  </div>
</section>
{% endif %}

<!-- ‚îÄ‚îÄ‚îÄ CTA BANNER ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
<section class="lp-cta" style="background-image: url('{% static 'bird-flowers.jpg' %}');">
  <div class="lp-cta-overlay">
    <div class="lp-container">
      <h2>Ready to Start Your Birding Journey?</h2>
      <p>
        Join BirdAlert for free and become part of a growing community of bird enthusiasts.
        Find birds in proven locations, identify species you've never seen before, and share
        your discoveries with people who love nature as much as you do.
      </p>
      <div class="lp-cta-actions">
        <a href="{% url 'register' %}" class="lp-cta-btn-primary">Create Free Account</a>
        <a href="{% url 'login' %}" class="lp-cta-btn-ghost">Already a member? Sign In</a>
      </div>
    </div>
  </div>
</section>

<!-- ‚îÄ‚îÄ‚îÄ FOOTER ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
<footer class="lp-footer">
  <div class="lp-container">
    <div class="lp-footer-grid">
      <div class="lp-footer-brand">
        <div class="lp-footer-logo">üê¶ BirdAlert</div>
        <p>The community bird watching platform for everyone. Find birds. Share discoveries. Connect with nature.</p>
      </div>
      <div class="lp-footer-links">
        <h4>Platform</h4>
        <a href="{% url 'index' %}">Home</a>
        <a href="{% url 'register' %}">Sign Up Free</a>
        <a href="{% url 'login' %}">Login</a>
      </div>
      <div class="lp-footer-links">
        <h4>Features</h4>
        <a href="#features">GPS Sightings</a>
        <a href="#features">Bird Database</a>
        <a href="#features">Community Feed</a>
      </div>
    </div>
    <div class="lp-footer-bottom">
      <p>¬© 2026 BirdAlert ‚Äî A Computer Science Senior Project. All rights reserved.</p>
    </div>
  </div>
</footer>

{% endif %}
{% endblock %}

{% block extra_js %}
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
  // ‚îÄ‚îÄ Map data ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  const sightingsData = [
    {% for sighting in sightings %}
      {id: {{ sighting.id }}, lat: {{ sighting.latitude }}, lng: {{ sighting.longitude }}, bird: "{{ sighting.bird_species.common_name }}"}{% if not forloop.last %},{% endif %}
    {% endfor %}
  ];

  const redIcon = L.icon({
    iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png',
    iconSize: [18, 34],
  });

  {% if user.is_authenticated %}
  // ‚îÄ‚îÄ Authenticated: full sighting card maps ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  sightingsData.forEach(function(s) {
    const el = document.getElementById('map-' + s.id);
    if (el) {
      const map = L.map(el).setView([s.lat, s.lng], 13);
      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '¬© OpenStreetMap'
      }).addTo(map);
      L.marker([s.lat, s.lng], {icon: redIcon}).addTo(map).bindPopup(s.bird);
    }
  });

  {% else %}
  // ‚îÄ‚îÄ Guest: landing page preview maps ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  sightingsData.slice(0, 6).forEach(function(s) {
    const el = document.getElementById('lp-map-' + s.id);
    if (el) {
      const map = L.map(el, {
        zoomControl: false,
        dragging: false,
        scrollWheelZoom: false,
        attributionControl: false
      }).setView([s.lat, s.lng], 11);
      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);
      L.marker([s.lat, s.lng], {icon: redIcon}).addTo(map);
    }
  });

  // ‚îÄ‚îÄ Transparent header on scroll ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  const header = document.getElementById('site-header');
  const hero = document.getElementById('lp-hero');

  function updateHeader() {
    if (window.scrollY > 60) {
      header.classList.add('lp-header-scrolled');
    } else {
      header.classList.remove('lp-header-scrolled');
    }
  }

  updateHeader();
  window.addEventListener('scroll', updateHeader, { passive: true });
  {% endif %}
</script>
{% endblock %}
